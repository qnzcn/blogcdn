window.wp=window.wp||{},window.WoowGalleryAdmin=window.WoowGalleryAdmin||{l10n:{}},window.WoowGalleryAdmin.mixins=window.WoowGalleryAdmin.mixins||[],window.WoowGalleryAdmin.Gallery=window.WoowGalleryAdmin.Gallery||{},window.WoowGalleryAdmin.Skin=window.WoowGalleryAdmin.Skin||{},window.WoowGalleryAdmin.Hook={hooks:{},register:function(t,e,i,n){let s=t.split(" "),a;for(let t=0;t<s.length;t++)a=s[t],this.exists(a)||(this.hooks[a]={}),this.hooks[a][e]={callback:i,context:n}},call:function(t,e,i){if(void 0!==this.hooks[t])for(let n in this.hooks[t]){if(!this.hooks[t].hasOwnProperty(n))continue;let s=this.hooks[t][n];if(i||(i=s.context),!1===s.callback.apply(i,e))break}},exists:function(t){return void 0!==this.hooks[t]},remove:function(t,e){this.exists(t)&&delete this.hooks[t][e]}},jQuery(function(t){var e=".woowgallery-tabs-nav",i=window.location.hash,n=i.replace("!","").split("/")[0];if(t(window).on("woowgallery_post_action",function(){var e=t("#post").attr("action");e&&(e=e.split("#")[0],t("#post").attr("action",e+window.location.hash))}),t(e).on("click",".nav-tab, a",function(i){i.preventDefault();var n=t(this).closest(e),s=t(n).data("container"),a=void 0!==t(this).attr("href")?t(this).attr("href"):t(this).data("tab");t(this).hasClass("woowgallery-active")||(t(n).find(".woowgallery-active").removeClass("woowgallery-active"),t(s).find("div.woowgallery-active").removeClass("woowgallery-active"),t(this).addClass("woowgallery-active"),t(s).find(a).addClass("woowgallery-active"),window.location.hash=a.split("#").join("#!"),t(window).trigger("woowgallery_post_action"),window.wgCodeEditor_custom_css&&"#woowgallery-tab-misc"===a&&window.wgCodeEditor_custom_css.codemirror.refresh())}),i&&i.indexOf("woowgallery-tab-")>=0){var s=t(n).parent(),a=t(s).data("navigation");t(a).find('a[href="'+n+'"]').trigger("click")}}),jQuery(function(t){function e(){t("#wp-link-wrap").removeClass("woowgalleryLinkModal").find(".link-target").removeAttr("style"),window.wpLink.close()}window.woowgalleryCustomLinkLoaded=!0,t("#wp-link-wrap").parent().is("div")&&t("#wp-link-backdrop, #wp-link-wrap").appendTo("body"),t(document).on("click.woowgalleryLink","[data-woowgallery-custom-link]",function(e){var i=t(this),n=i.attr("data-woowgallery-custom-link"),s;if(n||"INPUT"!==this.tagName&&"TEXTAREA"!==this.tagName||(n=i.attr("id"))||(n="id_"+Date.now(),i.attr("id",n)),n&&!(s=t("#"+n)).prop("readonly")&&!s.prop("disabled"))return window.wpActiveEditor=!0,window.wpLink.open(n),window.wpLink.woowgalleryCustomLinkField=s,t("#wp-link-wrap").removeClass("has-text-field").addClass("woowgalleryLinkModal").find(".link-target").css("visibility","hidden"),!1}).on("click.woowgalleryLink",".woowgalleryLinkModal #wp-link-submit",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var i=window.wpLink.getAttrs();i.href?(window.wpLink.textarea=window.wpLink.woowgalleryCustomLinkField,window.wpLink.textarea.val(i.href),window.wpLink.textarea[0].dispatchEvent(new Event("input")),e()):e()}).on("click.woowgalleryLink","#wp-link-cancel, #wp-link-close, #wp-link-backdrop",function(t){e()})}),function(t,e){let i=window.WoowGalleryAdmin;i.views=i.views||{},i.models=i.models||{},i.frames=i.frames||{},i.actions=i.actions||{},t(function(){let n=wp.media.view.MediaFrame.Select;i.views.MediaFramePost=wp.media.view.MediaFrame.Post.extend({initialize:function(){e.defaults(this.options,{multiple:!1,editing:!1,state:"insert",metadata:{}}),this.woowgallery=!0,n.prototype.initialize.apply(this,arguments)},createStates:function(){let e=this.options,n=t.extend({},wp.media.view.l10n,i.l10n);this.states.add([new wp.media.controller.Library({classes:"media-modal woowgallery-media-modal",id:"insert",title:n.insertMediaTitle,priority:20,toolbar:"main-insert",filterable:"all",library:wp.media.query(e.library),multiple:"add",editable:!0,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,router:"browse"}),new wp.media.controller.EditImage({model:e.editImage})])},bindHandlers:function(){let t;n.prototype.bindHandlers.apply(this,arguments),this.on("activate",this.activate,this),this.on("toolbar:create:main-insert",this.createToolbar,this),this.on("toolbar:create:featured-image",this.featuredImageToolbar,this),this.on("toolbar:create:main-embed",this.mainEmbedToolbar,this),t={menu:{default:"mainMenu"},content:{embed:"embedContent","edit-image":"editImageContent","edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}},e.each(t,(t,i)=>{e.each(t,(t,e)=>{this.on(i+":render:"+e,this[t],this)})})}});let s={createToolbar:wp.media.view.AttachmentsBrowser.prototype.createToolbar};e.extend(wp.media.view.AttachmentsBrowser.prototype,{createToolbar:function(){if(s.createToolbar.apply(this,arguments),this.controller.woowgallery){let e=!!i.l10n.selection_hide_selected;this.controller.$el.toggleClass("hide-selected",e);let n=window.WoowGalleryAdmin.Gallery.media_ids;if(!n||!n.length)return;let s=this,a=wp.media.View.extend({className:"woowgallery-select-switchers",template:wp.template("woowgallery-select-switchers"),events:{'change .woowgallery-selection-prepend input[type="checkbox"]':"toggleSelectionPrepend",'change .woowgallery-selection-display input[type="checkbox"]':"toggleSelectionDisplay"},toggleSelectionPrepend:function(e){i.l10n.selection_prepend=t(e.target).prop("checked")},toggleSelectionDisplay:function(e){let n=t(e.target).prop("checked");s.controller.$el.toggleClass("hide-selected",n),i.l10n.selection_hide_selected=n,n&&s.controller.content.get().$el.children("ul").trigger("scroll")}});this.toolbar.set("selectAppendPrependSwitcher",new a({controller:this.controller,priority:-70}).render())}}});let a={render:wp.media.view.Attachment.prototype.render,toggleSelection:wp.media.view.Attachment.prototype.toggleSelection,save:wp.media.view.Attachment.prototype.save};e.extend(wp.media.view.Attachment.prototype,{render:function(){let t=a.render.apply(this,arguments);return this.controller.woowgallery&&this.woowgallerySelect(),t},woowgallerySelect:function(){let t=window.WoowGalleryAdmin.Gallery.media_ids;this.options.woowgallerySelection=t;let e=this.model.get("id");t&&void 0!==e&&-1!==t.indexOf(e.toString())&&(this.$el.hasClass("woowgallery-selected")||this.$el.addClass("woowgallery-selected").attr("aria-checked",!0))},ignoreWoowgallerySelection:function(){let t=this.options.selection,i=this.options.woowgallerySelection;i.length&&e.each(i,e=>{let i=t.get(e);i&&t.remove(i)})},toggleSelection:function(t){if(this.controller.woowgallery){let i=this.collection,n=this.options.selection,s=this.model,a=t&&t.method,o,l,r,d;if(!n)return;if(o=n.single(),"between"===(a=e.isUndefined(a)?n.multiple:a)&&o&&n.multiple){if(o===s)return;return l=(r=i.indexOf(o))<(d=i.indexOf(this.model))?i.models.slice(r,d+1):i.models.slice(d,r+1),n.add(l),this.ignoreWoowgallerySelection(),this.$el.hasClass("woowgallery-selected")&&n.add(s),void n.single(s)}if("toggle"===a)return this.ignoreWoowgallerySelection(),n[this.selected()?"remove":"add"](s),void n.single(s);if("add"===a)return this.ignoreWoowgallerySelection(),n.add(s),void n.single(s)}a.toggleSelection.apply(this,arguments)},save:function(){a.save.apply(this,arguments);let e=this._save,i;e&&(i=e.requests).always(()=>{t(document).trigger("woowgalleryUpdateData",[this.model])})}});let o=wp.media.view.Attachment.Details;wp.media.view.Attachment.Details=o.extend({constructor:function(t){this.woowgallery=!1,t&&t.controller&&t.controller.woowgallery&&(this.woowgallery=t.controller.woowgallery),o.prototype.constructor.apply(this,arguments)},deleteAttachment:function(t){o.prototype.deleteAttachment.apply(this,arguments),this.woowgallery&&this.woowgalleryDeleteAttachment(t)},trashAttachment:function(t){o.prototype.trashAttachment.apply(this,arguments),this.woowgallery&&this.woowgalleryDeleteAttachment(t)},woowgalleryDeleteAttachment:function(e){t(document).trigger("woowgalleryDeleteMedia",[this.model.get("id")])}}),i.actions.MediaFramePost=function(n,s){s=t.extend({},wp.media.view.l10n,i.l10n,s);let a=this;return this.selected=n||[],i.frames.MediaFramePost?(i.frames.MediaFramePost.open(),i.frames.MediaFramePost):(i.frames.MediaFramePost=new i.views.MediaFramePost({className:"media-frame hide-menu woowgallery-media-frame",title:s.insertIntoPost,button:{text:s.insertIntoPost}}),i.frames.MediaFramePost.on("open",function(){i.frames.MediaFramePost.content.render(),i.frames.MediaFramePost.toolbar.render();let t=i.frames.MediaFramePost.state().get("selection");a.selected&&a.selected.length&&e.each(a.selected,e=>{t.add([wp.media.attachment(e)])})}),i.frames.MediaFramePost.on("menu:render:default",function(t){Object.keys(t._views).forEach(function(e){"insert"!==e&&t.unset(e)})}),i.frames.MediaFramePost.on("insert",function(e){let n=[];e.each(function(t){n.push(t.toJSON())},this),t(document).trigger("woowgalleryInsertMedia",[i.frames.MediaFramePost,n]),e.reset()}),i.frames.MediaFramePost.open(),i.frames.MediaFramePost)}})}(jQuery,_),function(t){let e=window.tagBox.quickClicks;window.tagBox.quickClicks=function(i){e(i);var n=t(".the-tags",i);if(n.length&&(n[0].dispatchEvent(new Event("input")),"add"===window.tagBox.userAction||"remove"===window.tagBox.userAction)){window.tagBox.userAction="";var s=n.attr("data-media-id"),a=n.attr("data-taxonomy"),o=n.val();if(!s)return;if(a){t.post(ajaxurl,{action:"woowgallery_set_media_tags",_nonce_woowgallery_ajax:t("#_nonce_woowgallery_ajax").val(),media_id:s,taxonomy:a,tags:o},function(t){});let e=_.uniq(_.compact(o.split(","))),i=window.woowgallery_content_indexed[s];i&&(i.tags=e);let n=window.WoowGalleryAdmin.Gallery.editItem;if(n&&"attachment"===n.type){let t;wp.media.model.Attachment.get(s).set("woowgallery_tags",e)}}}},window.woowgalleryTagBox={quickClicks:function(){var e=t("#woowgallery-portal");t(".tagsdiv",e).each(function(){tagBox.quickClicks(this)})},init:function(){var e=t("#woowgallery-portal");t(".tagsdiv",e).each(function(){tagBox.quickClicks(this)}),t(".tagadd",e).click(function(){tagBox.userAction="add",tagBox.flushTags(t(this).closest(".tagsdiv"))}),t("input.newtag",e).keypress(function(e){13==e.which&&(tagBox.userAction="add",tagBox.flushTags(t(this).closest(".tagsdiv")),e.preventDefault(),e.stopPropagation())}).each(function(e,i){t(i).wpTagsSuggest()}),t(".tagcloud-link",e).click(function(){tagBox.get(t(this).attr("id")),t(this).attr("aria-expanded","true").unbind().click(function(){t(this).attr("aria-expanded","false"===t(this).attr("aria-expanded")?"true":"false").siblings(".the-tagcloud").toggle()})})}}}(jQuery),function(t,e){let i;window.WoowGalleryAdmin.mixins.push({data:function(){return{editItem:!1,editItemSaving:!1}},computed:{editItemIndex:function(){return this.editItem?e.findIndex(this.gallery_paged,{id:this.editItem.id}):-1},editItemNext:function(){let t=this.editItemIndex;return!(t<0||t+1>=this.gallery_paged.length)&&this.gallery_paged[t+1]},editItemPrev:function(){let t=this.editItemIndex;return!(t<0||t-1<0)&&this.gallery_paged[t-1]}},watch:{editItem:function(e,i){e?i?this.$nextTick(()=>{woowgalleryTagBox.quickClicks()}):(t("body").addClass("modal-open"),this.$nextTick(()=>{quicktags({id:"item-caption",buttons:"strong,em,link,ul,ol,li,close"}),QTags._buttonsInit(),woowgalleryTagBox.init()})):t("body").removeClass("modal-open")}},methods:{editItemSet:function(t,i){if(i&&i.preventDefault(),!t)return!1;this.editItemClose(),this.$nextTick(()=>{this.editItem=e.find(this.gallery,e=>e.id===t.id)})},editItemClose:function(){this.editItem=!1},editItemPageLink:function(){if("attachment"===this.editItem.type){let t,e=wp.media.attachment(this.editItem.id).attributes;if(e&&e.link)return e.link}let t=window.woowgallery_content_indexed[this.editItem.id];return t&&t.src?t.src:""},editItemSetCopyright:function({type:e,target:i}){if("attachment"===this.editItem.type&&"change"===e){let e=window.woowgallery_content_indexed[this.editItem.id];e&&(e.copyright=i.value),this.editItemSaving=!0,t.post(ajaxurl,{action:"woowgallery_set_media_copyright",_nonce_woowgallery_ajax:t("#_nonce_woowgallery_ajax").val(),media_id:this.editItem.id,copyright:i.value}).done(t=>{this.editItemSaving=!1})}},editItemTagsTaxonomy:function(t){let e=window.woowgallery_content_indexed[this.editItem.id];return e&&e.tags_taxonomy?e.tags_taxonomy||t?e.tags_taxonomy:"media_tag":t&&"attachment"!==this.editItem.type?"":"media_tag"},editItemTypeIn:function(t){return(t=Array.isArray(t)?t:[t]).indexOf(this.editItem.type)>-1}}})}(jQuery,_),function(t,e){let i=window.WoowGalleryAdmin;i.mixins.push({data:function(){return{bulkEdit:!1,bulkEditType:"",bulkEditSaving:!1}},computed:{bulkEditItems:function(){return this.bulkEdit?this.gallery_extended.filter(t=>this.selected.indexOf(t.id)>-1):[]}},watch:{bulkEdit:function(e){e?(t("body").addClass("modal-open"),this.bulkEditType=this.bulkEditItems[0].type,this.$nextTick(()=>{quicktags({id:"item-caption",buttons:"strong,em,link,ul,ol,li,close"}),QTags._buttonsInit(),woowgalleryTagBox.init()})):t("body").removeClass("modal-open")}},methods:{bulkEditSet:function(){this.selected_types.length>1||(this.bulkEdit=JSON.parse(JSON.stringify(i.l10n.bulkEdit)))},bulkEditClose:function(){this.bulkEdit=!1,this.bulkEditType="",this.bulkEditSaving=!1},bulkEditSave:function(e){e&&e.preventDefault();let i=this.bulkEdit,n;n=this.gallery.filter(t=>this.selected.indexOf(t.id)>-1),t.each(n,(t,e)=>{if(!i.status||"publish"!==e.status&&"private"!==e.status||(e.status=i.status),i.title_src&&(e.title_src=i.title_src,"custom"===i.title_src&&(e.title=i.title)),i.caption_src&&(e.caption_src=i.caption_src,"custom"===i.caption_src&&(e.caption=i.caption)),i.alt_src&&(e.alt_src=i.alt_src,"custom"===i.alt_src&&(e.alt=i.alt)),i.link.url_change&&(e.link.url=i.link.url),i.link.text_change&&(e.link.text=i.link.text),i.link.target&&(e.link.target=i.link.target),i.copyright){let t=window.woowgallery_content_indexed[e.id];t&&(t.copyright=i.copyright.trim())}i.tags&&(e.tags=array_unique_noempty(e.tags.split(",").concat(i.tags.split(","))).join(","))}),(i.tags||i.copyright)&&(this.bulkEditSaving=!0,t.post(ajaxurl,{action:"woowgallery_bulk_set_media_data",_nonce_woowgallery_ajax:t("#_nonce_woowgallery_ajax").val(),media:JSON.stringify(n),tags:i.tags,copyright:i.copyright},t=>{this.bulkEditSaving=!1,this.bulkEditClose()})),this.bulkEditSaving||this.bulkEditClose()},bulkEditTagsTaxonomy:function(){return"attachment"===this.bulkEditType?"media_tag":"post"===this.bulkEditType?"post_tag":this.bulkEditType+"_tag"}}})}(jQuery,_),function(t,e){let i=window.WoowGalleryAdmin,n=t("#activity");i.mixins.push({data:function(){return{gallery:[],gallery_extended:[],gallery_paged:[],filter:"",sortby:i.l10n.sortby,sortorder:i.l10n.sortorder,selected:[],page:1,per_page:i.l10n.per_page,total_media:0,view:i.l10n.view_mode,ready:{}}},computed:{all_ready:function(){if(Object.keys(this.ready).length)for(let t in this.ready)if(!1===this.ready[t])return!1;return!0},media_ids:function(){return t.map(this.gallery,t=>t.id)},selected_last:function(){return e.last(this.selected)},selected_types:function(){return this.selected.length?e.uniq(e.pluck(this.gallery.filter(t=>this.selected.indexOf(t.id)>-1),"type")):[]},pages:function(){return this.per_page?Math.ceil(this.total_media/this.per_page):0}},watch:{all_ready:function(t){this.toggleClassActivity(!t)},gallery:{handler:function(e){let i=JSON.stringify(e),n=JSON.parse(i);t("#woowgallery-data").val(i),this.gallery_extended=t.each(n,(t,e)=>{e.title=this.itemTitle(e),e.caption=this.itemCaption(e),e.alt=this.itemAlt(e),e.thumb=this.itemThumbnail(e),e.image=this.itemImage(e),e.date=this.itemDate(e),e.tags=this.itemTags(e),"post"===e.type&&(e.has_password=this.itemHasPassword(e)),"woowgallery"===e.subtype&&(e.count=this.itemGalleryCount(e))}),this.doGalleryPaged()},deep:!0},page:function(t){this.doGalleryPaged()},pages:function(t){t<this.page&&(this.page=t||1)},filter:function(t){this.page>1?this.page=1:this.doGalleryPaged()},media_ids:function(e){this.selected=t.grep(this.selected,t=>e.indexOf(t)>-1)},sortby:function(t){"custom"!==t&&(this.gallery=this.doGallerySorted(this.gallery))},sortorder:function(t,e){t!==e&&(this.gallery=this.gallery.reverse())}},methods:{toggleClassActivity:function(t){n.toggleClass("activity",t)},setReady:function(t,e){void 0===this.ready[t]?this.$set(this.ready,t,e):this.ready[t]=e},fetchMedia:function(t){let i=e.filter(t,t=>{if("attachment"===t.type){let e,i=wp.media.attachment(t.id).attributes;return!i||!i.title}return!1});if(i.length){let t=e.pluck(i,"id");this.fetchWPMedia(t)}let n=e.filter(t,t=>{if("post"===t.type){let e=window.woowgallery_content_indexed[t.id];return!e||void 0===e.excerpt}return!1});if(n.length){let t=e.uniq(e.pluck(n,"subtype"));e.each(t,t=>{let i=e.pluck(e.filter(n,e=>t===e.subtype),"id");this.fetchWPPosts(i,t)})}},fetchWPMedia:function(t){let e=t.length;if(e){let n=this,s;function i(t,e){t.more().then(s=>{t.hasMore()&&t.length<e?i(t):(n.updateMediaData(),n.setReady("attachments",!0))})}this.setReady("attachments",!1),i(wp.media.query({post__in:t,orderby:"post__in"}),e)}else this.setReady("attachments",!0)},fetchWPPosts:function(n,s){n.length&&i.post_types[s]?(this.setReady(s,!1),t.ajax({url:i.wpApiRoot+"wp/v2/"+i.post_types[s].base,method:"GET",beforeSend:t=>{t.setRequestHeader("X-WP-Nonce",i.wpApiNonce)},data:{context:"view",status:"any",include:n,per_page:this.per_page,orderby:"include",_fields:"wg_data",_post_type:s}}).done((t,i,n)=>{let a=e.compact(e.pluck(t,"wg_data"));if(a.length){let t=e.indexBy(a,"id");window.woowgallery_content_indexed={...window.woowgallery_content_indexed,...t}}this.updateMediaData(),this.updatePostStatus(),this.setReady(s,!0)})):this.setReady(s,!0)},doGallerySorted:function(t){let e="asc"===this.sortorder?1:-1,i,n;return t.sort((t,s)=>{switch(this.sortby){case"title":return i=this.itemTitle(t),n=this.itemTitle(s),i.localeCompare(n,void 0,{sensitivity:"base"})*e;case"caption":return i=this.itemCaption(t),n=this.itemCaption(s),i.localeCompare(n,void 0,{sensitivity:"base"})*e;case"alt":return i=this.itemAlt(t),n=this.itemAlt(s),i.localeCompare(n,void 0,{sensitivity:"base"})*e;case"tags":return i=t.tags,n=s.tags,i.localeCompare(n,void 0,{sensitivity:"base"})*e;case"date":return i=this.itemDate(t),n=this.itemDate(s),i<n?-1*e:e;case"slug":return i=this.itemSlug(t),n=this.itemSlug(s),i<n?-1*e:e}return 0})},doGalleryPaged:function(){let t,e=this.filter;t=e?this.gallery_extended.filter(t=>t.title.indexOf(e)>-1||t.caption.indexOf(e)>-1||t.alt.indexOf(e)>-1||t.tags.indexOf(e)>-1):this.gallery_extended,this.total_media=t.length,this.per_page&&(t=t.slice((this.page-1)*this.per_page,this.page*this.per_page)),this.fetchMedia(t),this.gallery_paged=t},updateMediaData:function(){this.gallery=t.each(this.gallery,(t,i)=>{if("attachment"===i.type){let t,e=wp.media.attachment(i.id).attributes;if(e&&(e.woowgallery_tags&&(i.tags=e.woowgallery_tags.join(",")),e.copyright)){let t=window.woowgallery_content_indexed[i.id];t&&(t.copyright=e.copyright)}}else{let t=window.woowgallery_content_indexed[i.id];t&&t.tags&&(t.tags_taxonomy?i.tags=t.tags.join(","):i.tags=e.uniq(e.compact([...t.tags,...i.tags.split(",")])).join(","))}})},updatePostStatus:function(){this.gallery=t.each(this.gallery,(t,e)=>{"post"===e.type&&(e.status=this.itemStatus(e))})},getItemById:function(t){return e.find(this.gallery,e=>e.id===t)},isType:function(t,e){let i=this.getItemById(t);return!!i&&(e=Array.isArray(e)?e:[e]).indexOf(i.type)>-1},remoteImageSize:function(t){return new Promise((e,i)=>{let n=new Image;n.onload=(()=>e(n)),n.onerror=i,n.src=t})},itemOriginalSrc:function(t){if(t.original)return t.original;let e=window.woowgallery_content_indexed[t.id];if(e&&e.original)return e.original;if("attachment"===t.type){let e,i=wp.media.attachment(t.id).attributes;if(i&&i.url)return i.url}return t.src?t.src:e&&e.src?e.src:void 0},itemThumbnail:function(t){if(t.thumb&&t.thumb[0])return t.thumb;let e=window.woowgallery_content_indexed[t.id];if(e&&e.thumb&&e.thumb[0]){let t=e.thumb;return[t[0],t[1],t[2]]}if("attachment"===t.type){let e,n=wp.media.attachment(t.id).attributes;if(n&&n.name)if(n.sizes){if(n.sizes.medium)return[n.sizes.medium.url,n.sizes.medium.width,n.sizes.medium.height];if(n.sizes.thumbnail)return[n.sizes.thumbnail.url,n.sizes.thumbnail.width,n.sizes.thumbnail.height];if(n.sizes.large)return[n.sizes.large.url,n.sizes.large.width,n.sizes.large.height];if(n.sizes.full)return[n.sizes.full.url,n.sizes.full.width,n.sizes.full.height]}else{if(n.image&&n.image.src&&n.image.src!==n.icon)return[n.image.src,n.image.width,n.image.height];if(n.icon){let t=n.icon.split("/").reverse()[0];return[i.l10n.icons_url+"/"+t,300,300,!1,!0]}}return[i.l10n.icons_url+"/"+t.subtype+".png",300,300,!1,!0]}return[i.l10n.icons_url+"/default.png",300,300,!1,!0]},itemImage:function(t){if(t.image&&t.image[0])return t.image;let e=window.woowgallery_content_indexed[t.id];if(e&&e.image&&e.image[0]){let t=e.image;return[t[0],t[1],t[2]]}if("attachment"===t.type){let e,n=wp.media.attachment(t.id).attributes;if(n&&n.name)if(n.sizes){if(n.sizes.full)return[n.sizes.full.url,n.sizes.full.width,n.sizes.full.height]}else{if(n.image&&n.image.src&&n.image.src!==n.icon)return[n.image.src,n.image.width,n.image.height];if(n.icon){let t=n.icon.split("/").reverse()[0];return[i.l10n.icons_url+"/"+t,300,300,!1,!0]}}return[i.l10n.icons_url+"/"+t.subtype+".png",300,300,!1,!0]}return[i.l10n.icons_url+"/default.png",300,300,!1,!0]},itemTitle:function(t){if("custom"===t.title_src)return t.title;if("attachment"===t.type){var e,i=wp.media.attachment(t.id).attributes;if(i&&i.name)return i[t.title_src]?i[t.title_src]:i.title}let n=window.woowgallery_content_indexed[t.id];return n&&n.title?n.title:t.title},itemAlt:function(t){if("custom"===t.alt_src)return t.alt;if("attachment"===t.type){if("title"===t.alt_src)return this.itemTitle(t);let e,i=wp.media.attachment(t.id).attributes;if(i&&i.alt)return i[t.alt_src]?i[t.alt_src]:i.alt}let e=window.woowgallery_content_indexed[t.id];return e&&e.alt?e.alt:t.alt},itemCaption:function(t){if("custom"===t.caption_src)return t.caption;if("attachment"===t.type){let e,i=wp.media.attachment(t.id).attributes;if(i&&i.caption)return i[t.caption_src]?i[t.caption_src]:i.caption}let e=window.woowgallery_content_indexed[t.id];return e&&e.caption?e[t.caption_src]?e[t.caption_src]:e.caption:t.caption},itemDate:function(t){if("attachment"===t.type){let e,i=wp.media.attachment(t.id).attributes;if(i&&i.date)return"function"==typeof i.date.toISOString?i.date.toISOString().split(".")[0]:new Date(i.date).toISOString().split(".")[0]}let e=window.woowgallery_content_indexed[t.id];return e&&e.date?e.date:t.date?t.date:"0000-00-00T00:00:00"},itemSlug:function(t){if("attachment"===t.type){let e,i=wp.media.attachment(t.id).attributes;if(i&&i.name)return i.name}let e=window.woowgallery_content_indexed[t.id];return e&&e.slug?e.slug:t.slug||""},itemTags:function(t){if("attachment"===t.type){let i,n=wp.media.attachment(t.id).attributes;if(n&&n.woowgallery_tags)return e.uniq(e.compact([...n.woowgallery_tags,...t.tags.split(",")])).join(",")}let i=window.woowgallery_content_indexed[t.id];return i&&i.tags?e.uniq(e.compact([...i.tags,...t.tags.split(",")])).join(","):t.tags},itemGalleryCount:function(t){let e=window.woowgallery_content_indexed[t.id];return e&&e.count?e.count:""},itemStatus:function(t){let e=window.woowgallery_content_indexed[t.id];return e&&"publish"!==e.status&&"private"!==e.status?e.status:t.status},itemCopyright:function(t){let e=window.woowgallery_content_indexed[t.id];return e&&e.copyright?e.copyright:""},itemHasPassword:function(t){let e=window.woowgallery_content_indexed[t.id];return!(!e||!e.has_password)&&e.has_password},itemEditLink:function(t){let e=window.woowgallery_content_indexed[t.id];return e&&e.edit_link?e.edit_link:""},subtypeIcon:function(t){if("post"===t.type)return i.post_types[t.subtype]?i.post_types[t.subtype].icon_html:`<span class="wg-posttype-icon dashicons dashicons-no"><b>${t.subtype}</b></span>`;if("attachment"===t.type&&"image"!==t.subtype){let e;switch(t.subtype){case"audio":case"video":e="format-"+t.subtype;break;default:e="paperclip";break}return`<span class="wg-posttype-icon dashicons dashicons-${e}"></span>`}return""},toggleSelectAll:function(){this.selected.length?this.selected=[]:this.selected=t.map(this.gallery,t=>t.id)},toggleSelectItem:function(t,e){this.sorting||(e&&e.preventDefault(),this.isSelected(t)?this.deselectItem(t):this.selectItem(t))},isSelected:function(t){return this.selected.indexOf(t)>-1},deselectItem:function(e,i){i&&i.preventDefault(),this.selected=t.grep(this.selected,t=>t!==e)},selectItem:function(t,e){e&&e.preventDefault(),this.selected.push(t)},selectItemsTo:function(t,i){if(!this.selected_last)return void this.toggleSelectItem(t,i);i&&i.preventDefault();let n=this.media_ids.indexOf(this.selected_last),s=this.media_ids.indexOf(t),a=this.media_ids.slice(Math.min(n,s),Math.max(n,s)+1);this.selected=e.uniq(this.selected.concat(a))},removeItem:function(e,i){if(i){i.preventDefault();let e=t(i.target).attr("data-confirm");if(e&&!confirm(e.toString()))return}this.gallery=t.grep(this.gallery,t=>t.id!==e)},removeSelectedItems:function(e){if(e){e.preventDefault();let i=t(e.target).attr("data-confirm");if(i&&!confirm(i.toString()))return}this.selected.length&&(this.gallery=t.grep(this.gallery,t=>-1===this.selected.indexOf(t.id)))},setStatus:function(e,i,n){n&&n.preventDefault(),this.gallery=t.each(this.gallery,(t,n)=>{n.id===e&&(n.status=i)})}}})}(jQuery,_),function(t,e){var i=window.WoowGalleryAdmin;Vue.directive("sortable",function(t,e,n){var s=e.value||{};i.sortable=Sortable.create(t,s)}),i.mixins.push({data:function(){return{sortableAnimationTime:200,sortableGroup:!1,sorting:!1,sortingHash:e.now(),sortingPageChanged:!1,sortingStartPage:0,sortingElementIndex:0,sortingElementID:0}},computed:{sortableDisabled:function(){return this.filter||"custom"!==this.sortby}},methods:{sortable:function(){var i=this,n=0,s=0,a;return{group:{name:"woowgallery",pull:!0},sort:!0,delay:0,delayOnTouchOnly:!1,touchStartThreshold:0,disabled:i.sortableDisabled,store:null,animation:i.sortableAnimationTime,easing:"cubic-bezier(1, 0, 0, 1)",handle:".sort-handle",filter:function(t){return i.sortableDisabled},preventOnFilter:!1,draggable:"li",dataIdAttr:"data-id",ghostClass:"sort-ghost",chosenClass:"sort-chosen",dragClass:"sort-drag",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:1,forceFallback:!0,fallbackClass:"sortable-fallback",fallbackOnBody:"parent",fallbackTolerance:2,dragoverBubble:!1,removeCloneOnHide:!0,emptyInsertThreshold:5,onChoose:function(t){i.sortableGroup=!1},onStart:function(s){var o=t(s.item),l=o.attr("data-id"),r=i.selected.length;i.sortingStartPage=i.page,i.sortingElementIndex=s.oldIndex+(i.page-1)*i.per_page,i.sortingElementID=l,clearTimeout(n),n=setTimeout(function(){if(i.sorting=!0,r>1&&o.hasClass("selected")){var n=t(s.srcElement);i.sortableGroup=!0,n.addClass("sort-group");var d="";d+="li.sort-chosen .attachment-preview::after{content:'"+r+"'}",e.each(i.selected,function(t){t!==l&&(d+='li[data-id="'+t+'"]{transform:scale(0.5)}')}),a=t('<style type="text/css" id="woowgallery-sort-group-styles">'+d+"</style>").appendTo(document.head)}},i.sortableAnimationTime/1.5)},onEnd:function(o){clearTimeout(n);var l=t(o.item),r=t(o.srcElement),d=l.attr("data-id"),c=[],u=JSON.parse(JSON.stringify(i.gallery)),h=i.sortingElementIndex,m=o.newIndex+(i.page-1)*i.per_page;if(m>=u.length&&(m=u.length-1),h!==m){if(i.sortingStartPage<i.page&&m--,u.splice(m,0,u.splice(h,1)[0]),i.sortableGroup){e.each(i.selected,function(t){t!==d&&(h=e.map(u,function(t){return t.id}).indexOf(t),c.push(u.splice(h,1)[0]))}),m=1+e.map(u,function(t){return t.id}).indexOf(d);for(var g=c.length;g--;)u.splice(m,0,c[g])}i.gallery=u}clearTimeout(s),s=setTimeout(function(){i.sorting=!1,i.sortableGroup&&(r.removeClass("sort-group"),a&&a.remove()),i.sortableGroup=!1},i.sortableAnimationTime),i.sortingPageChanged=!1,i.sortingStartPage=0,i.sortingElementIndex=0,i.sortingElementID=0,i.sortingHash=e.now()},onAdd:function(t){t.item.remove()}}},sortableMoveToPage:function(t){if(!this.sorting)return!1;this.page=t,this.sortingPageChanged=!0}}})}(jQuery,_),function(t,e){let i;window.WoowGalleryAdmin.mixins.push({methods:{setDefaults:function(e,i){const n=(e,i)=>(i=i||{},t.each(e,function(t,e){"object"==typeof e&&(void 0!==e.default?i[t]=e.default:n(e,i))}),i);return n(e,i)},getFieldRowClasses:function(t){let i={disabled:this.fieldDisabled(t),readonly:this.fieldReadonly(t),required:this.fieldRequired(t),"premium-field":this.fieldPremium(t)};return e.isArray(t.styleClasses)?e.each(t.styleClasses,t=>{i[t]=!0}):e.isString(t.styleClasses)&&(i[t.styleClasses]=!0),i["field-"+t.tag]=!0,i},getFieldRowStyles:function(t){let i={};return e.isObject(t.styles)&&(i=t.styles),i},fieldTypeHasLabel:function(t){let e=t.type||t.tag;switch(t.attr&&t.attr.type&&(e=t.attr.type),e){case"button":case"submit":case"reset":return!1;default:return!0}},fieldDisabled:function(t){return!(!t.prop||!t.prop.disabled)&&t.prop.disabled},fieldRequired:function(t){return!(!t.prop||!t.prop.required)&&t.prop.required},fieldPremium:function(t){return!!t.premium},fieldVisible:function(t){if(!t.visible)return!0;let e,i;try{i=(e=compileExpression(t.visible))(this.model)}catch(t){i=!0}return i},fieldReadonly:function(t){return!(!t.prop||!t.prop.readonly)&&t.prop.readonly},fieldHint:function(t){return t.hint},getFieldTagType:function(t){return"field-"+t.tag}}})}(jQuery,_),function(t){let e,i={};e={props:["skin","schema","id","disabled","options"],data:function(){return{}},computed:{value:{get:function(){let t=null;if(this.skin)return void 0!==this.$root.model&&this.id&&(t=this.$root.model[this.id]),null===t&&(t=this.schema.default),this.formatValueToField(t)},set:function(t){this.skin&&(t=this.formatValueToModel(t),this.id&&(this.$root.model[this.id]=t))}}},methods:{getFieldName:function(){let t=this.options&&this.options.fieldNameTemplate?this.options.fieldNameTemplate:"{name}",e;return this.schema.attr&&this.schema.attr.name&&(e=this.schema.attr.name),e=e||this.schema.name||this.id,e=t.replace("{name}",e)},getFieldType:function(t){let e;return this.schema.attr&&this.schema.attr.type&&(e=this.schema.attr.type),e=e||this.schema.type||"text",t&&"color"===e?"text":e},getFieldID:function(){let t=this.options&&this.options.fieldIdPrefix?this.options.fieldIdPrefix:"",e;return this.schema.attr&&this.schema.attr.id&&(e=this.schema.attr.id),t+(e=e||this.schema.id||this.id)},getFieldClasses:function(){let t=["field-"+this.id];return this.schema.attr&&this.schema.attr.class&&(_.isArray(this.schema.attr.class)?_.union(t,this.schema.attr.class):t.push(this.schema.attr.class)),t},getFieldAttributes:function(){let e={},i=this.getFieldType();if(i&&"text"!==i&&(e["data-type"]=i),this.schema.attr&&(e=t.extend(e,this.schema.attr)),this.schema.props){let t=0,i=this.schema.props.length,n;for(;t<i;t++)e[n=this.schema.props[t]]=!0}return e},formatValueToField:function(t){return t},formatValueToModel:function(t){return t}}},i["field-input"]=Vue.component("field-input",{mixins:[e],template:'<div class="wrapper">\n    <input class="form-control"\n           :class="getFieldClasses()"\n           :id="getFieldID()"\n           :type="getFieldType(true)"\n           :name="getFieldName()"\n           v-model="value"\n           v-bind="getFieldAttributes()"\n    >\n    <span class="helper" v-if="getFieldType() === \'color\' || getFieldType() === \'range\'">{{ value }}</span>\n</div>',data:function(){return{picker:null}},watch:{disabled:function(e){"color"===this.getFieldType()&&t.fn.spectrum&&(e?this.picker.spectrum("disable"):this.picker.spectrum("enable"))}},mounted:function(){this.$nextTick(function(){"color"===this.getFieldType()&&(t.fn.spectrum?this.spectrumInit():console.warn("Spectrum color library is missing."))})},updated:function(){this.$nextTick(function(){"color"===this.getFieldType()&&t.fn.spectrum&&this.picker&&this.picker.spectrum("set",this.value)
})},beforeDestroy:function(){this.picker&&this.picker.spectrum("destroy")},methods:{spectrumInit:function(){let e=this;this.picker&&this.picker.spectrum("destroy"),this.picker=t('input[data-type="color"]',this.$el).spectrum(_.defaults(this.schema.options||{},{color:this.value,showInput:!0,showAlpha:!0,disabled:this.disabled,allowEmpty:!1,preferredFormat:"rgb",change:function(t){e.value=t?t.toString():null}}))},formatValueToModel:function(t){if(null!==t){let e;switch(this.getFieldType()){case"number":return Number(t);case"range":return Number(t)}}return t}}}),i["field-checkbox"]=Vue.component("field-checkbox",{mixins:[e],template:'<div class="wrapper">\n    <span class="wg-toggle" :class="{\'is-checked\': !!value}">\n        <input type="hidden" :name="getFieldName()" value="0" />\n        <input type="checkbox" :id="getFieldID()" :name="getFieldName()" :class="getFieldClasses()" v-bind="getFieldAttributes()" value="1" v-model="value" true-value="1" false-value="0">\n        <span class="wg-toggle__track"></span>\n        <span class="wg-toggle__thumb"></span>\n    </span>\n</div>',methods:{formatValueToField:function(t){return Number(t)},formatValueToModel:function(t){return null!==t?Number(t):t}}}),i["field-select"]=Vue.component("field-select",{mixins:[e],template:'<div class="wrapper">\n    <select class="form-control"\n           v-model="value"\n           :class="getFieldClasses()"\n           :id="getFieldID()"\n           :name="getFieldName()"\n           v-bind="getFieldAttributes()"\n    >\n         <option v-for="item in items" :value="getItemValue(item)" :disabled="isItemDisabled(item)">{{ getItemName(item) }}</option>\n    </select>\n</div>',data:function(){return{items:this.schema.options}},methods:{getItemValue:function(t){if(_.isObject(t)){if(void 0!==t.value)return t.value;throw"`value` is not defined"}return t},getItemName:function(t){if(_.isObject(t)){if(void 0!==t.name)return t.name;throw"`name` is not defined"}return t},isItemDisabled:function(t){return!!_.isObject(t)&&(void 0!==t.premium&&(t.premium&&!config.premium))}}}),window.WoowGalleryAdmin.vueFields=i}(jQuery),function(t){let e=document.getElementById("woowgallery-lightbox-config");if(!e||!window.woowgallery_lightbox)return;let i=window.WoowGalleryAdmin,n=new Vue({el:e,mixins:i.mixins,components:i.vueFields,data:{options:{fieldNameTemplate:"_woowgallery_lightbox[{name}]"},premium:!1,lightbox:"",model:{},defaults:{},schema:{},activeTab:""},computed:{isSettingsDefault:function(){let t=_.pick(this.model,(t,e,i)=>this.defaults.hasOwnProperty(e));return JSON.stringify(t)===JSON.stringify(this.defaults)},isSettingsChanged:function(){let e,i;return JSON.stringify(this.model)!==JSON.stringify(t.extend({},this.defaults,window.woowgallery_lightbox[this.lightbox].model))}},watch:{lightbox:function(e){if(!e)return this.schema={},this.activeTab="",this.defaults={},void(this.model={});this.schema=t.extend({},window.woowgallery_lightbox[e].schema),this.activeTab=_.keys(this.schema)[0],this.defaults=this.setDefaults(this.schema),this.model=t.extend({},this.defaults,window.woowgallery_lightbox[e].model)}},mounted:function(){this.premium=i.status&&("premium"===i.status||"trial"===i.status),i.l10n.selected_lightbox||""===i.l10n.selected_lightbox?this.lightbox=i.l10n.selected_lightbox:this.lightbox=i.l10n.default_lightbox},methods:{switchTab:function(t){this.activeTab=t},resetLightboxSettingsChanges:function(){this.model=t.extend({},this.defaults,window.woowgallery_lightbox[this.skin].model)},resetLightboxSettings:function(){this.model=t.extend({},this.defaults)}}});i.Lightbox=n}(jQuery),function(t){let e=document.getElementById("woowgallery-skin-config");if(!e||!window.woowgallery_skin)return;let i=window.WoowGalleryAdmin,n;Vue.use(Toasted);let s=new Vue({el:e,mixins:i.mixins,components:i.vueFields,data:{options:{fieldNameTemplate:"_woowgallery_skin[{name}]"},premium:!1,skin:"",default_skin:"",preset:"default",presets:["default"],skin_info:"",model:{},defaults:{},schema:{},activeTab:"",new_preset:!1,new_preset_name:"",activity:!1},computed:{isSettingsDefault:function(){let t=_.pick(this.model,(t,e,i)=>this.defaults.hasOwnProperty(e));return JSON.stringify(t)===JSON.stringify(this.defaults)},isSettingsChanged:function(){let e=this.activity,i,n;return JSON.stringify(this.model)!==JSON.stringify(t.extend({},this.defaults,window.woowgallery_skin[this.skin].model[this.preset]))}},watch:{skin:function(e){this.schema=t.extend({},window.woowgallery_skin[e].schema),this.skin_info=t.extend({},window.woowgallery_skin[e].info),this.activeTab=_.keys(this.schema)[0],this.defaults=this.setDefaults(this.schema),this.updatePresets(e),-1===this.presets.indexOf(this.preset)&&(this.preset="default"),this.model=t.extend({},this.defaults,window.woowgallery_skin[e].model[this.preset]),this.fakeActivity(400)},preset:function(e){this.model=t.extend({},this.defaults,window.woowgallery_skin[this.skin].model[e]),this.fakeActivity(400)},new_preset_name:function(t){this.new_preset_name=t.replace(/[&\/\\#,+()\[\]~%.'":;?<>{}^=|`]/g,"")}},mounted:function(){let t;if(this.premium=i.status&&("premium"===i.status||"trial"===i.status),this.default_skin=i.l10n.default_skin,t=i.l10n.selected_skin||""===i.l10n.selected_skin?i.l10n.selected_skin:i.l10n.default_skin){let e=t.split(": ");this.skin=e[0],e[1]?this.preset=e[1]:this.preset="default"}},methods:{fakeActivity:function(t){this.activity=!0,n&&clearTimeout(n),n=setTimeout(()=>{s.activity=!1,n=null},t)},switchTab:function(t){this.activeTab=t},loadPreset:function(e){this.fakeActivity(120),this.model=t.extend({},this.defaults,window.woowgallery_skin[this.skin].model[e.target.value]),e.target.value="_custom"},updatePresets:function(t){this.presets=Object.keys(window.woowgallery_skin[t].model),this.new_preset=!1,this.new_preset_name=""},saveSkinSettings:function(){this.activity=!0;let e=this.skin,n=this.new_preset?this.new_preset_name:this.preset,s=this.model,a=this.defaults,o={action:"woowgallery_save_skin_data",_nonce_woowgallery_skin_settings_save:i.l10n._nonce_woowgallery_skin_settings_save,skin:e,preset:n,data:JSON.stringify(s)};if("default"===n&&this.isSettingsDefault&&(o.default_reset=!0),!n)return this.$toasted.error(i.l10n.fill_preset_name,{duration:2e3}),this.activity=!1,void t("#woowskin_preset").focus();t.post(ajaxurl,o,i=>{i&&i.success?(window.woowgallery_skin[e].model[n]=t.extend({},a,s),this.updatePresets(e),this.skin=e,this.preset=n,this.$toasted.success(i.data,{duration:2e3}),this.updateSkinsListSetting()):i&&i.data?this.$toasted.error(i.data,{duration:2e3}):this.$toasted.error(":(",{duration:2e3})},"json").always(()=>{this.activity=!1})},deletePreset:function(){this.activity=!0;let e=this.skin,n=this.preset,s={action:"woowgallery_delete_skin_preset",_nonce_woowgallery_skin_settings_save:i.l10n._nonce_woowgallery_skin_settings_save,skin:e,preset:n},a;if("default"===n)return this.$toasted.error(i.l10n.delete_default_preset_error,{duration:2e3}),void(this.activity=!1);t.post(ajaxurl,s,t=>{t&&t.success?(delete window.woowgallery_skin[e].model[n],this.updatePresets(e),this.skin=e,this.preset="default",this.$toasted.success(t.data,{duration:2e3}),this.updateSkinsListSetting()):t&&t.data?this.$toasted.error(t.data,{duration:2e3}):this.$toasted.error(":(",{duration:2e3})},"json").always(()=>{this.activity=!1})},resetSkinSettingsChanges:function(){this.model=t.extend({},this.defaults,window.woowgallery_skin[this.skin].model[this.preset])},resetSkinSettings:function(){this.model=t.extend({},this.defaults)},updateSkinsListSetting:function(){let e=t("select.skins-presets-list");if(e.length){let i="";t.each(window.woowgallery_skin,(e,n)=>{i+='<option value="'+e+'">'+n.info.name+"</option>",t.each(n.model,(t,s)=>{"default"!==t&&(i+='<option value="'+e+": "+t+'">'+n.info.name+": "+t+"</option>")})}),e.each((e,n)=>{let s=t(n),a=s.val();s.find("option").not('[value=""]').remove(),s.append(i),s.find('[value="'+a+'"]').length?s.val(a):s.val(this.default_skin)})}}}});i.Skin=s}(jQuery),function(t){let e=window.WoowGalleryAdmin;e.mixins.push({filters:{formatTags:function(e){return e?(_.isString(e)&&(e=e.split(",")),_.isArray(e)&&_.size(e)?(e=t.map(e,e=>t.trim(e))).sort((t,e)=>t.localeCompare(e,void 0,{sensitivity:"base"})).join(", "):""):""}}}),t(function(){let i=t(".woowgallery-choose-skin"),n=t("#woowgallery-skin-select"),s;i.on("click","button",function(e){e.preventDefault(),i.hasClass("closed")?(i.removeClass("closed"),n.css("display","none").removeClass("closed").slideDown()):(i.addClass("closed"),n.slideUp(()=>{t(this).addClass("closed")}))}),n.on("click","label",function(){s?clearTimeout(s):i.addClass("activity"),s=setTimeout(()=>{e.Skin.skin=t("input:checked",this).val(),i.removeClass("activity"),s=null},300)});var a=window.opener||window.top;if(a&&"object"==typeof a.WoowGalleryAdmin&&"function"==typeof a.WoowGalleryAdmin.blocksUpdater){const e=parseInt(t("#post_ID").val()),i=t("#post_type").val();t("#message").length&&a.WoowGalleryAdmin.blocksUpdater({action:"updated",id:e,type:i}),t('#publish[name="publish"]').on("click",function(){a.WoowGalleryAdmin.blocksUpdater({action:"prepare",id:e,type:i})})}})}(jQuery),function(t){let e=window.WoowGalleryAdmin,i=new Vue({el:"#woowgallery-preview",mixins:e.mixins,data:{woowgallery_type:"gallery"},computed:{},watch:{},filters:{},mounted:function(){window.woowgallery_content_indexed=_.indexBy(window.woowgallery_content,"id");let n=t("#woowgallery-data").val(),s;this.gallery=n?JSON.parse(n):[],t("#woowgallery").on("click",".woowgallery-add-wpmedia",t=>{t.preventDefault(),e.actions.MediaFramePost([],{})}),t(document).on("woowgalleryInsertMedia",(n,a,o)=>{(o=_.pluck(o,"id").filter(t=>-1===this.media_ids.indexOf(t.toString()))).length&&(i.toggleClassActivity(!0),t.post(ajaxurl,{action:"woowgallery_get_media_data",media:JSON.stringify(o)},t=>{t&&t.success&&(s=e.l10n.selection_prepend?[].concat(t.data,this.gallery):[].concat(this.gallery,t.data),this.gallery=this.doGallerySorted(s),this.$nextTick(()=>{_.each(this.gallery_extended,function(t){void 0===window.woowgallery_content_indexed[t.id]&&(window.woowgallery_content_indexed[t.id]=JSON.parse(JSON.stringify(t)))}),this.updateMediaData()}))},"json").always(()=>{this.toggleClassActivity(!1)}))}),t(document).on("woowgalleryDeleteMedia",(t,e)=>{this.removeItem(e)})},methods:{moveToGallery:function(){return!1}}});e.Gallery=i}(jQuery);
//# sourceMappingURL=edit-gallery.min.js.map