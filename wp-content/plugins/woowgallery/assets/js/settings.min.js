window.wp=window.wp||{},window.WoowGalleryAdmin=window.WoowGalleryAdmin||{l10n:{}},window.WoowGalleryAdmin.mixins=window.WoowGalleryAdmin.mixins||[],window.WoowGalleryAdmin.Gallery=window.WoowGalleryAdmin.Gallery||{},window.WoowGalleryAdmin.Skin=window.WoowGalleryAdmin.Skin||{},window.WoowGalleryAdmin.Hook={hooks:{},register:function(e,t,i,s){let n=e.split(" "),o;for(let e=0;e<n.length;e++)o=n[e],this.exists(o)||(this.hooks[o]={}),this.hooks[o][t]={callback:i,context:s}},call:function(e,t,i){if(void 0!==this.hooks[e])for(let s in this.hooks[e]){if(!this.hooks[e].hasOwnProperty(s))continue;let n=this.hooks[e][s];if(i||(i=n.context),!1===n.callback.apply(i,t))break}},exists:function(e){return void 0!==this.hooks[e]},remove:function(e,t){this.exists(e)&&delete this.hooks[e][t]}},jQuery(function(e){var t=".woowgallery-tabs-nav",i=window.location.hash,s=i.replace("!","").split("/")[0];if(e(window).on("woowgallery_post_action",function(){var t=e("#post").attr("action");t&&(t=t.split("#")[0],e("#post").attr("action",t+window.location.hash))}),e(t).on("click",".nav-tab, a",function(i){i.preventDefault();var s=e(this).closest(t),n=e(s).data("container"),o=void 0!==e(this).attr("href")?e(this).attr("href"):e(this).data("tab");e(this).hasClass("woowgallery-active")||(e(s).find(".woowgallery-active").removeClass("woowgallery-active"),e(n).find("div.woowgallery-active").removeClass("woowgallery-active"),e(this).addClass("woowgallery-active"),e(n).find(o).addClass("woowgallery-active"),window.location.hash=o.split("#").join("#!"),e(window).trigger("woowgallery_post_action"),window.wgCodeEditor_custom_css&&"#woowgallery-tab-misc"===o&&window.wgCodeEditor_custom_css.codemirror.refresh())}),i&&i.indexOf("woowgallery-tab-")>=0){var n=e(s).parent(),o=e(n).data("navigation");e(o).find('a[href="'+s+'"]').trigger("click")}}),function(e,t){let i;window.WoowGalleryAdmin.mixins.push({methods:{setDefaults:function(t,i){const s=(t,i)=>(i=i||{},e.each(t,function(e,t){"object"==typeof t&&(void 0!==t.default?i[e]=t.default:s(t,i))}),i);return s(t,i)},getFieldRowClasses:function(e){let i={disabled:this.fieldDisabled(e),readonly:this.fieldReadonly(e),required:this.fieldRequired(e),"premium-field":this.fieldPremium(e)};return t.isArray(e.styleClasses)?t.each(e.styleClasses,e=>{i[e]=!0}):t.isString(e.styleClasses)&&(i[e.styleClasses]=!0),i["field-"+e.tag]=!0,i},getFieldRowStyles:function(e){let i={};return t.isObject(e.styles)&&(i=e.styles),i},fieldTypeHasLabel:function(e){let t=e.type||e.tag;switch(e.attr&&e.attr.type&&(t=e.attr.type),t){case"button":case"submit":case"reset":return!1;default:return!0}},fieldDisabled:function(e){return!(!e.prop||!e.prop.disabled)&&e.prop.disabled},fieldRequired:function(e){return!(!e.prop||!e.prop.required)&&e.prop.required},fieldPremium:function(e){return!!e.premium},fieldVisible:function(e){if(!e.visible)return!0;let t,i;try{i=(t=compileExpression(e.visible))(this.model)}catch(e){i=!0}return i},fieldReadonly:function(e){return!(!e.prop||!e.prop.readonly)&&e.prop.readonly},fieldHint:function(e){return e.hint},getFieldTagType:function(e){return"field-"+e.tag}}})}(jQuery,_),function(e){let t=document.getElementById("woowgallery-lightbox-config");if(!t||!window.woowgallery_lightbox)return;let i=window.WoowGalleryAdmin,s=new Vue({el:t,mixins:i.mixins,components:i.vueFields,data:{options:{fieldNameTemplate:"_woowgallery_lightbox[{name}]"},premium:!1,lightbox:"",model:{},defaults:{},schema:{},activeTab:""},computed:{isSettingsDefault:function(){let e=_.pick(this.model,(e,t,i)=>this.defaults.hasOwnProperty(t));return JSON.stringify(e)===JSON.stringify(this.defaults)},isSettingsChanged:function(){let t,i;return JSON.stringify(this.model)!==JSON.stringify(e.extend({},this.defaults,window.woowgallery_lightbox[this.lightbox].model))}},watch:{lightbox:function(t){if(!t)return this.schema={},this.activeTab="",this.defaults={},void(this.model={});this.schema=e.extend({},window.woowgallery_lightbox[t].schema),this.activeTab=_.keys(this.schema)[0],this.defaults=this.setDefaults(this.schema),this.model=e.extend({},this.defaults,window.woowgallery_lightbox[t].model)}},mounted:function(){this.premium=i.status&&("premium"===i.status||"trial"===i.status),i.l10n.selected_lightbox||""===i.l10n.selected_lightbox?this.lightbox=i.l10n.selected_lightbox:this.lightbox=i.l10n.default_lightbox},methods:{switchTab:function(e){this.activeTab=e},resetLightboxSettingsChanges:function(){this.model=e.extend({},this.defaults,window.woowgallery_lightbox[this.skin].model)},resetLightboxSettings:function(){this.model=e.extend({},this.defaults)}}});i.Lightbox=s}(jQuery),function(e){let t,i={};t={props:["skin","schema","id","disabled","options"],data:function(){return{}},computed:{value:{get:function(){let e=null;if(this.skin)return void 0!==this.$root.model&&this.id&&(e=this.$root.model[this.id]),null===e&&(e=this.schema.default),this.formatValueToField(e)},set:function(e){this.skin&&(e=this.formatValueToModel(e),this.id&&(this.$root.model[this.id]=e))}}},methods:{getFieldName:function(){let e=this.options&&this.options.fieldNameTemplate?this.options.fieldNameTemplate:"{name}",t;return this.schema.attr&&this.schema.attr.name&&(t=this.schema.attr.name),t=t||this.schema.name||this.id,t=e.replace("{name}",t)},getFieldType:function(e){let t;return this.schema.attr&&this.schema.attr.type&&(t=this.schema.attr.type),t=t||this.schema.type||"text",e&&"color"===t?"text":t},getFieldID:function(){let e=this.options&&this.options.fieldIdPrefix?this.options.fieldIdPrefix:"",t;return this.schema.attr&&this.schema.attr.id&&(t=this.schema.attr.id),e+(t=t||this.schema.id||this.id)},getFieldClasses:function(){let e=["field-"+this.id];return this.schema.attr&&this.schema.attr.class&&(_.isArray(this.schema.attr.class)?_.union(e,this.schema.attr.class):e.push(this.schema.attr.class)),e},getFieldAttributes:function(){let t={},i=this.getFieldType();if(i&&"text"!==i&&(t["data-type"]=i),this.schema.attr&&(t=e.extend(t,this.schema.attr)),this.schema.props){let e=0,i=this.schema.props.length,s;for(;e<i;e++)t[s=this.schema.props[e]]=!0}return t},formatValueToField:function(e){return e},formatValueToModel:function(e){return e}}},i["field-input"]=Vue.component("field-input",{mixins:[t],template:'<div class="wrapper">\n    <input class="form-control"\n           :class="getFieldClasses()"\n           :id="getFieldID()"\n           :type="getFieldType(true)"\n           :name="getFieldName()"\n           v-model="value"\n           v-bind="getFieldAttributes()"\n    >\n    <span class="helper" v-if="getFieldType() === \'color\' || getFieldType() === \'range\'">{{ value }}</span>\n</div>',data:function(){return{picker:null}},watch:{disabled:function(t){"color"===this.getFieldType()&&e.fn.spectrum&&(t?this.picker.spectrum("disable"):this.picker.spectrum("enable"))}},mounted:function(){this.$nextTick(function(){"color"===this.getFieldType()&&(e.fn.spectrum?this.spectrumInit():console.warn("Spectrum color library is missing."))})},updated:function(){this.$nextTick(function(){"color"===this.getFieldType()&&e.fn.spectrum&&this.picker&&this.picker.spectrum("set",this.value)})},beforeDestroy:function(){this.picker&&this.picker.spectrum("destroy")},methods:{spectrumInit:function(){let t=this;this.picker&&this.picker.spectrum("destroy"),this.picker=e('input[data-type="color"]',this.$el).spectrum(_.defaults(this.schema.options||{},{color:this.value,showInput:!0,showAlpha:!0,disabled:this.disabled,allowEmpty:!1,preferredFormat:"rgb",change:function(e){t.value=e?e.toString():null}}))},formatValueToModel:function(e){if(null!==e){let t;switch(this.getFieldType()){case"number":return Number(e);case"range":return Number(e)}}return e}}}),i["field-checkbox"]=Vue.component("field-checkbox",{mixins:[t],template:'<div class="wrapper">\n    <span class="wg-toggle" :class="{\'is-checked\': !!value}">\n        <input type="hidden" :name="getFieldName()" value="0" />\n        <input type="checkbox" :id="getFieldID()" :name="getFieldName()" :class="getFieldClasses()" v-bind="getFieldAttributes()" value="1" v-model="value" true-value="1" false-value="0">\n        <span class="wg-toggle__track"></span>\n        <span class="wg-toggle__thumb"></span>\n    </span>\n</div>',methods:{formatValueToField:function(e){return Number(e)},formatValueToModel:function(e){return null!==e?Number(e):e}}}),i["field-select"]=Vue.component("field-select",{mixins:[t],template:'<div class="wrapper">\n    <select class="form-control"\n           v-model="value"\n           :class="getFieldClasses()"\n           :id="getFieldID()"\n           :name="getFieldName()"\n           v-bind="getFieldAttributes()"\n    >\n         <option v-for="item in items" :value="getItemValue(item)" :disabled="isItemDisabled(item)">{{ getItemName(item) }}</option>\n    </select>\n</div>',data:function(){return{items:this.schema.options}},methods:{getItemValue:function(e){if(_.isObject(e)){if(void 0!==e.value)return e.value;throw"`value` is not defined"}return e},getItemName:function(e){if(_.isObject(e)){if(void 0!==e.name)return e.name;throw"`name` is not defined"}return e},isItemDisabled:function(e){return!!_.isObject(e)&&(void 0!==e.premium&&(e.premium&&!config.premium))}}}),window.WoowGalleryAdmin.vueFields=i}(jQuery),function(e){let t=document.getElementById("woowgallery-skin-config");if(!t||!window.woowgallery_skin)return;let i=window.WoowGalleryAdmin,s;Vue.use(Toasted);let n=new Vue({el:t,mixins:i.mixins,components:i.vueFields,data:{options:{fieldNameTemplate:"_woowgallery_skin[{name}]"},premium:!1,skin:"",default_skin:"",preset:"default",presets:["default"],skin_info:"",model:{},defaults:{},schema:{},activeTab:"",new_preset:!1,new_preset_name:"",activity:!1},computed:{isSettingsDefault:function(){let e=_.pick(this.model,(e,t,i)=>this.defaults.hasOwnProperty(t));return JSON.stringify(e)===JSON.stringify(this.defaults)},isSettingsChanged:function(){let t=this.activity,i,s;return JSON.stringify(this.model)!==JSON.stringify(e.extend({},this.defaults,window.woowgallery_skin[this.skin].model[this.preset]))}},watch:{skin:function(t){this.schema=e.extend({},window.woowgallery_skin[t].schema),this.skin_info=e.extend({},window.woowgallery_skin[t].info),this.activeTab=_.keys(this.schema)[0],this.defaults=this.setDefaults(this.schema),this.updatePresets(t),-1===this.presets.indexOf(this.preset)&&(this.preset="default"),this.model=e.extend({},this.defaults,window.woowgallery_skin[t].model[this.preset]),this.fakeActivity(400)},preset:function(t){this.model=e.extend({},this.defaults,window.woowgallery_skin[this.skin].model[t]),this.fakeActivity(400)},new_preset_name:function(e){this.new_preset_name=e.replace(/[&\/\\#,+()\[\]~%.'":;?<>{}^=|`]/g,"")}},mounted:function(){let e;if(this.premium=i.status&&("premium"===i.status||"trial"===i.status),this.default_skin=i.l10n.default_skin,e=i.l10n.selected_skin||""===i.l10n.selected_skin?i.l10n.selected_skin:i.l10n.default_skin){let t=e.split(": ");this.skin=t[0],t[1]?this.preset=t[1]:this.preset="default"}},methods:{fakeActivity:function(e){this.activity=!0,s&&clearTimeout(s),s=setTimeout(()=>{n.activity=!1,s=null},e)},switchTab:function(e){this.activeTab=e},loadPreset:function(t){this.fakeActivity(120),this.model=e.extend({},this.defaults,window.woowgallery_skin[this.skin].model[t.target.value]),t.target.value="_custom"},updatePresets:function(e){this.presets=Object.keys(window.woowgallery_skin[e].model),this.new_preset=!1,this.new_preset_name=""},saveSkinSettings:function(){this.activity=!0;let t=this.skin,s=this.new_preset?this.new_preset_name:this.preset,n=this.model,o=this.defaults,l={action:"woowgallery_save_skin_data",_nonce_woowgallery_skin_settings_save:i.l10n._nonce_woowgallery_skin_settings_save,skin:t,preset:s,data:JSON.stringify(n)};if("default"===s&&this.isSettingsDefault&&(l.default_reset=!0),!s)return this.$toasted.error(i.l10n.fill_preset_name,{duration:2e3}),this.activity=!1,void e("#woowskin_preset").focus();e.post(ajaxurl,l,i=>{i&&i.success?(window.woowgallery_skin[t].model[s]=e.extend({},o,n),this.updatePresets(t),this.skin=t,this.preset=s,this.$toasted.success(i.data,{duration:2e3}),this.updateSkinsListSetting()):i&&i.data?this.$toasted.error(i.data,{duration:2e3}):this.$toasted.error(":(",{duration:2e3})},"json").always(()=>{this.activity=!1})},deletePreset:function(){this.activity=!0;let t=this.skin,s=this.preset,n={action:"woowgallery_delete_skin_preset",_nonce_woowgallery_skin_settings_save:i.l10n._nonce_woowgallery_skin_settings_save,skin:t,preset:s},o;if("default"===s)return this.$toasted.error(i.l10n.delete_default_preset_error,{duration:2e3}),void(this.activity=!1);e.post(ajaxurl,n,e=>{e&&e.success?(delete window.woowgallery_skin[t].model[s],this.updatePresets(t),this.skin=t,this.preset="default",this.$toasted.success(e.data,{duration:2e3}),this.updateSkinsListSetting()):e&&e.data?this.$toasted.error(e.data,{duration:2e3}):this.$toasted.error(":(",{duration:2e3})},"json").always(()=>{this.activity=!1})},resetSkinSettingsChanges:function(){this.model=e.extend({},this.defaults,window.woowgallery_skin[this.skin].model[this.preset])},resetSkinSettings:function(){this.model=e.extend({},this.defaults)},updateSkinsListSetting:function(){let t=e("select.skins-presets-list");if(t.length){let i="";e.each(window.woowgallery_skin,(t,s)=>{i+='<option value="'+t+'">'+s.info.name+"</option>",e.each(s.model,(e,n)=>{"default"!==e&&(i+='<option value="'+t+": "+e+'">'+s.info.name+": "+e+"</option>")})}),t.each((t,s)=>{let n=e(s),o=n.val();n.find("option").not('[value=""]').remove(),n.append(i),n.find('[value="'+o+'"]').length?n.val(o):n.val(this.default_skin)})}}}});i.Skin=n}(jQuery),jQuery;
//# sourceMappingURL=settings.min.js.map